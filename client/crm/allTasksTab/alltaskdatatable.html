<template name="alltaskdatatable">

  <div class="row no-gutters" style="padding: 0px 32px;">
    <div class="col-12">
      <div class="card shadow mb-3">
        <div class="card-header"
          style="padding: 0px !important;background-color: rgba(0,0,0,0); border-top: 0px; border-left: 0px; border-right: 0px;">
          <ul class="nav nav-tabs nav-fill" id="myTab" role="tablist" style="border-bottom: 0px;">
            <li class="nav-item">
              <a class="nav-link active" id="allTasks-tab" data-toggle="tab" href="#allTasks" role="tab"
                aria-selected="true">All Tasks</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="todayTab-tab" data-toggle="tab" href="#todayTab" role="tab"
                aria-selected="false">Today</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="upcomingTab-tab" data-toggle="tab" href="#upcomingTab" role="tab"
                aria-selected="false">Upcoming</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="projectsTab-tab" data-toggle="tab" href="#projectsTab" role="tab"
                aria-selected="false">Projects</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="filterLabelsTab-tab" data-toggle="tab" href="#filterLabelsTab" role="tab"
                aria-selected="false">Labels</a>
            </li>
          </ul>
        </div>

        <div class="card-body">
          <div class="card-body p-3 rounded">
            <div class="tab-content" id="myTabContent">

              <div class="tab-pane fade show active" id="allTasks" role="tabpanel" aria-labelledby="allTasks-tab">
                <div class="table-responsive">
                  <table id="tblAllTaskDatatable" name="tblAllTaskDatatable" style="width:100%"
                    class="dataTable table table-hover table-striped table-bordered tblAllTaskDatatable">
                    <thead>
                      <tr class="dnd-moved">
                        <th class="th colCompleteTask" style="width: 2%;">
                        </th>
                        <th class="th colDate">Date</th>
                        <th class="th colTaskName">Task</th>
                        <th class="th colTaskDesc">Description</th>
                        <th class="th colTaskLabels">Labels</th>
                        <th class="th colTaskActions">Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{#each item in allRecords}}
                      <tr class="dnd-moved" style="cursor: pointer;">
                        <td contenteditable="false" class="colCompleteTask task_priority_{{item.fields.priority}}"
                          style="width: 2%;">
                          <div
                            class="custom-control custom-checkbox chkBox pointer no-modal task_priority_{{item.fields.priority}}"
                            style="width:15px;margin-right: -6px;">
                            <input class="custom-control-input chkBox chkComplete pointer" type="checkbox"
                              id="formCheck-{{item.fields.ID}}">
                            <label class="custom-control-label chkBox pointer chk_complete" data-id="{{item.fields.ID}}"
                              for="formCheck-{{item.fields.ID}}"></label>
                          </div>
                        </td>
                        <td contenteditable="false" class="openEditTaskModal colDate" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{getTodoDate item.fields.due_date
                          'DD/MM/YYYY'}}
                        </td>
                        <td contenteditable="false" class="openEditTaskModal colTaskName" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{item.fields.TaskName}}
                        </td>
                        <td contenteditable="false" class="openEditTaskModal colTaskDesc" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{getDescription
                          item.fields.TaskDescription}}
                        </td>
                        <td contenteditable="false" class="openEditTaskModal colTaskLabels" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{#if item.fields.TaskLabel}}
                          {{#if item.fields.TaskLabel.fields}}
                          <span class="taskTag"><a class="taganchor" href="">
                              <i class="fas fa-tag" style="margin-right: 5px;"></i>
                              {{item.fields.TaskLabel.fields.TaskLabelName}}
                            </a>
                          </span>
                          {{else}}
                          {{#each lbl in item.fields.TaskLabel}}
                          <span class="taskTag">
                            <a class="taganchor" href="">
                              <i class="fas fa-tag" style="margin-right: 5px;"></i>
                              {{lbl.fields.TaskLabelName}}
                            </a>
                          </span>
                          {{/each}}
                          {{/if}}
                          {{/if}}
                        </td>
                        <td contenteditable="false" class="colTaskActions">
                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-primary openEditTaskModal" data-id="{{item.fields.ID}}"
                              data-catg="{{getProjectName item.fields.ProjectName}}" title="Edit Task"><i
                                class="far fa-edit" style="width: 16px;" data-id="{{item.fields.ID}}"
                                data-catg="{{getProjectName item.fields.ProjectName}}"></i></button>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-success" data-toggle="dropdown"
                              title="Reschedule Task"><i class="far fa-calendar"></i></button>
                            <div class="dropdown-menu dropdown-menu-right reschedule-dropdown-menu  no-modal"
                              aria-labelledby="dropdownMenuButton" style="width: 275px;">
                              <a class="dropdown-item no-modal setScheduleToday" href="#" data-id="{{item.fields.ID}}">
                                <i class="fas fa-calendar-day text-success no-modal"
                                  style="margin-right: 8px;"></i>Today
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getTodayDate 'ddd'}}
                                </div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleTomorrow" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-sun text-warning no-modal" style="margin-right: 8px;"></i>
                                Tomorrow
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getTomorrowDay}}
                                </div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleWeekend" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-couch text-primary no-modal" style="margin-right: 8px;"></i>
                                This Weekend
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  Sat
                                </div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleNexweek" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-calendar-alt text-danger no-modal" style="margin-right: 8px;"></i>
                                Next Week
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getNextMonday}}
                                </div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleNodate" href="#" data-id="{{item.fields.ID}}">
                                <i class="fas fa-ban text-secondary no-modal" style="margin-right: 8px;"></i>
                                No Date
                              </a>
                              <div class="dropdown-divider no-modal"></div>
                              <div class="form-group no-modal" data-toggle="tooltip" data-placement="bottom"
                                title="Date format: DD/MM/YYYY" style="margin: 6px 20px; margin-top: 14px;">
                                <div class="input-group date no-modal" style="cursor: pointer;">
                                  <input type="text" id="{{item.fields.ID}}" class="form-control crmDatepicker no-modal"
                                    autocomplete="off">
                                  <div class="input-group-addon no-modal">
                                    <span class="glyphicon glyphicon-th no-modal" style="cursor: pointer;"></span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-warning openEditTaskModal" data-id="{{item.fields.ID}}"
                              data-ttype="comment" data-catg="{{getProjectName item.fields.ProjectName}}"
                              title="Add a Comment"><i class="far fa-comment-alt" data-id="{{item.fields.ID}}"
                                data-ttype="comment"
                                data-catg="{{getProjectName item.fields.ProjectName}}"></i></button>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-secondary" data-toggle="dropdown"
                              data-placement="bottom" title="More Options"><i class="fas fa-ellipsis-h"></i></button>
                            <div class="dropdown-menu dropdown-menu-right crmtaskdrop" id="">
                              <a class="dropdown-item openEditTaskModal" data-id="{{item.fields.ID}}"
                                data-catg="{{getProjectName item.fields.ProjectName}}">
                                <i class="far fa-edit" style="margin-right: 8px;" data-id="{{item.fields.ID}}"
                                  data-catg="{{getProjectName item.fields.ProjectName}}"></i>
                                Edit Task
                              </a>

                              <div class="dropdown-divider"></div>

                              <div class="dropdown-item-wrap no-modal">
                                <div class="no-modal">
                                  <div class="no-modal">
                                    <span class="no-modal">Due Date</span>
                                  </div>
                                  <div class="no-modal" style="display: inline-flex;">
                                    <i class="fa fa-calendar-check-o no-modal taskDropSecondMenu taskDropMenuToday setScheduleToday"
                                      data-toggle="tooltip" data-placement="bottom" title="Today"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-sun-o no-modal taskDropSecondMenu taskDropMenuTomorrow setScheduleTomorrow"
                                      data-toggle="tooltip" data-placement="bottom" title="Tomorrow"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-print no-modal taskDropSecondMenu taskDropMenuWeekend setScheduleWeekend"
                                      data-toggle="tooltip" data-placement="bottom" title="This weekend"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-calendar-minus-o no-modal taskDropSecondMenu taskDropMenuNextweek setScheduleNexweek"
                                      data-toggle="tooltip" data-placement="bottom" title="Next week"
                                      data-id="{{item.fields.ID}}"></i>
                                  </div>
                                </div>

                                <div class="no-modal">
                                  <div class="no-modal">
                                    <span class="no-modal">Priority</span>
                                  </div>
                                  <div class="no-modal" style="display: inline-flex;">
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskOverdue" data-toggle="tooltip"
                                      data-placement="bottom" title="Priority 1" data-priority="3"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskDropMenuTomorrow"
                                      data-toggle="tooltip" data-placement="bottom" title="Priority 2" data-priority="2"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskDropMenuWeekend"
                                      data-toggle="tooltip" data-placement="bottom" title="Priority 3" data-priority="1"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="far fa-flag no-modal taskDropSecondFlag" data-toggle="tooltip"
                                      data-placement="bottom" title="Priority 4" data-priority="0"
                                      data-id="{{item.fields.ID}}"></i>
                                  </div>
                                </div>
                              </div>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item no-modal" data-id="{{item.fields.ID}}">
                                <i class="fa fa-clock-o" style="margin-right: 8px;"></i>
                                Reminders
                              </a>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item no-modal movetoproject" data-id="{{item.fields.ID}}"
                                data-projectid="{{item.fields.ProjectID}}" data-toggle="modal">
                                <i class="fa fa-arrow-circle-right" style="margin-right: 8px;"
                                  data-id="{{item.fields.ID}}" data-projectid="{{item.fields.ProjectID}}"></i>
                                Move to Project
                              </a>
                              <a class="dropdown-item duplicate-task no-modal" data-id="{{item.fields.ID}}">
                                <i class="fa fa-plus-square-o" style="margin-right: 8px;"
                                  data-id="{{item.fields.ID}}"></i>
                                Duplicate
                              </a>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item delete-task no-modal" data-id="{{item.fields.ID}}">
                                <i class="fas fa-trash-alt" style="margin-right: 8px;" data-id="{{item.fields.ID}}"></i>
                                Delete Task
                              </a>
                            </div>
                          </div>

                        </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="tab-pane fade" id="todayTab" role="tabpanel" aria-labelledby="todayTab-tab">
                <div class="table-responsive">
                  <table id="tblTodayTaskDatatable" name="tblTodayTaskDatatable" style="width:100%"
                    class="dataTable table table-hover table-striped table-bordered tblTodayTaskDatatable">
                    <thead>
                      <tr class="dnd-moved">
                        <th class="th colCompleteTask" style="width: 2%;">
                        </th>
                        <th class="th colDate">Date</th>
                        <th class="th colTaskName">Task</th>
                        <th class="th colTaskDesc">Description</th>
                        <th class="th colTaskLabels">Labels</th>
                        <th class="th colTaskActions">Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{#each item in todayRecords}}
                      <tr class="dnd-moved" style="cursor: pointer;">
                        <td contenteditable="false" class="colCompleteTask  task_priority_{{item.fields.priority}}"
                          style="width: 2%;">
                          <div
                            class="custom-control custom-checkbox chkBox pointer no-modal task_priority_{{item.fields.priority}}"
                            style="width:15px;margin-right: -6px;">
                            <input class="custom-control-input chkBox chkComplete pointer" type="checkbox"
                              id="formCheck-{{item.fields.ID}}">
                            <label class="custom-control-label chkBox pointer chk_complete" data-id="{{item.fields.ID}}"
                              for="formCheck-{{item.fields.ID}}"></label>
                          </div>
                        </td>
                        <td contenteditable="false" class="openEditTaskModal colDate" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{getTodoDate item.fields.due_date
                          'DD/MM/YYYY'}}</td>
                        <td contenteditable="false" class="openEditTaskModal colTaskName" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{item.fields.TaskName}}</td>
                        <td contenteditable="false" class="openEditTaskModal colTaskDesc" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{getDescription
                          item.fields.TaskDescription}}
                        </td>
                        <td contenteditable="false" class="openEditTaskModal colTaskLabels" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{#if item.fields.TaskLabel}}
                          {{#if item.fields.TaskLabel.fields}}
                          <span class="taskTag"><a class="taganchor" href=""><i class="fas fa-tag"
                                style="margin-right: 5px;"></i>{{item.fields.TaskLabel.fields.TaskLabelName}}</a></span>
                          {{else}}
                          {{#each lbl in item.fields.TaskLabel}}
                          <span class="taskTag"><a class="taganchor" href=""><i class="fas fa-tag"
                                style="margin-right: 5px;"></i>{{lbl.fields.TaskLabelName}}</a></span>
                          {{/each}}
                          {{/if}}


                          {{/if}}
                        </td>
                        <td contenteditable="false" class="colTaskActions">
                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-primary openEditTaskModal" data-id="{{item.fields.ID}}"
                              data-catg="{{getProjectName item.fields.ProjectName}}" title="Edit Task"><i
                                class="far fa-edit" style="width: 16px;" data-id="{{item.fields.ID}}"
                                data-catg="{{getProjectName item.fields.ProjectName}}"></i></button>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-success" data-toggle="dropdown"><i
                                class="far fa-calendar" title="Reschedule Task"></i></button>
                            <div class="dropdown-menu dropdown-menu-right reschedule-dropdown-menu  no-modal"
                              aria-labelledby="dropdownMenuButton" style="width: 275px;">
                              <a class="dropdown-item no-modal setScheduleToday" href="#" data-id="{{item.fields.ID}}">
                                <i class="fas fa-calendar-day text-success no-modal"
                                  style="margin-right: 8px;"></i>Today
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getTodayDate 'ddd'}}</div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleTomorrow" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-sun text-warning no-modal" style="margin-right: 8px;"></i>Tomorrow
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getTomorrowDay}}</div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleWeekend" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-couch text-primary no-modal" style="margin-right: 8px;"></i>This
                                Weekend
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  Sat</div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleNexweek" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-calendar-alt text-danger no-modal" style="margin-right: 8px;"></i>Next
                                Week
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getNextMonday}}
                                </div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleNodate" href="#" data-id="{{item.fields.ID}}">
                                <i class="fas fa-ban text-secondary no-modal" style="margin-right: 8px;"></i>
                                No Date</a>
                              <div class="dropdown-divider no-modal"></div>
                              <div class="form-group no-modal" data-toggle="tooltip" data-placement="bottom"
                                title="Date format: DD/MM/YYYY" style="margin: 6px 20px; margin-top: 14px;">
                                <div class="input-group date no-modal" style="cursor: pointer;">
                                  <input type="text" id="{{item.fields.ID}}" class="form-control crmDatepicker no-modal"
                                    autocomplete="off">
                                  <div class="input-group-addon no-modal">
                                    <span class="glyphicon glyphicon-th no-modal" style="cursor: pointer;"></span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-warning openEditTaskModal" data-id="{{item.fields.ID}}"
                              data-ttype="comment" data-catg="{{getProjectName item.fields.ProjectName}}"
                              title="Add a Comment"><i class="far fa-comment-alt" data-id="{{item.fields.ID}}"
                                data-ttype="comment"
                                data-catg="{{getProjectName item.fields.ProjectName}}"></i></button>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-secondary" data-toggle="dropdown"
                              data-placement="bottom" title="More Options"><i class="fas fa-ellipsis-h"></i></button>
                            <div class="dropdown-menu dropdown-menu-right crmtaskdrop" id="">
                              <a class="dropdown-item openEditTaskModal" data-id="{{item.fields.ID}}"
                                data-catg="{{getProjectName item.fields.ProjectName}}">
                                <i class="far fa-edit" style="margin-right: 8px;" data-id="{{item.fields.ID}}"
                                  data-catg="{{getProjectName item.fields.ProjectName}}"></i>Edit
                                Task</a>

                              <div class="dropdown-divider"></div>

                              <div class="dropdown-item-wrap no-modal">
                                <div class="no-modal">
                                  <div class="no-modal">
                                    <span class="no-modal">Due Date</span>
                                  </div>
                                  <div class="no-modal" style="display: inline-flex;">
                                    <i class="fa fa-calendar-check-o no-modal taskDropSecondMenu taskDropMenuToday setScheduleToday"
                                      data-toggle="tooltip" data-placement="bottom" title="Today"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-sun-o no-modal taskDropSecondMenu taskDropMenuTomorrow setScheduleTomorrow"
                                      data-toggle="tooltip" data-placement="bottom" title="Tomorrow"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-print no-modal taskDropSecondMenu taskDropMenuWeekend setScheduleWeekend"
                                      data-toggle="tooltip" data-placement="bottom" title="This weekend"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-calendar-minus-o no-modal taskDropSecondMenu taskDropMenuNextweek setScheduleNexweek"
                                      data-toggle="tooltip" data-placement="bottom" title="Next week"
                                      data-id="{{item.fields.ID}}"></i>
                                  </div>
                                </div>

                                <div class="no-modal">
                                  <div class="no-modal">
                                    <span class="no-modal">Priority</span>
                                  </div>
                                  <div class="no-modal" style="display: inline-flex;">
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskOverdue" data-toggle="tooltip"
                                      data-placement="bottom" title="Priority 1" data-priority="3"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskDropMenuTomorrow"
                                      data-toggle="tooltip" data-placement="bottom" title="Priority 2" data-priority="2"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskDropMenuWeekend"
                                      data-toggle="tooltip" data-placement="bottom" title="Priority 3" data-priority="1"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="far fa-flag no-modal taskDropSecondFlag" data-toggle="tooltip"
                                      data-placement="bottom" title="Priority 4" data-priority="0"
                                      data-id="{{item.fields.ID}}"></i>
                                  </div>
                                </div>
                              </div>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item no-modal" data-id="{{item.fields.ID}}">
                                <i class="fa fa-clock-o" style="margin-right: 8px;"></i>Reminders</a>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item no-modal movetoproject" data-id="{{item.fields.ID}}"
                                data-projectid="{{item.fields.ProjectID}}">
                                <i class="fa fa-arrow-circle-right" style="margin-right: 8px;"
                                  data-id="{{item.fields.ID}}" data-projectid="{{item.fields.ProjectID}}"></i>Move to
                                Project</a>
                              <a class="dropdown-item duplicate-task no-modal" data-id="{{item.fields.ID}}">
                                <i class="fa fa-plus-square-o" style="margin-right: 8px;"
                                  data-id="{{item.fields.ID}}"></i>Duplicate</a>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item delete-task no-modal" data-id="{{item.fields.ID}}">
                                <i class="fas fa-trash-alt" style="margin-right: 8px;"
                                  data-id="{{item.fields.ID}}"></i>Delete
                                Task</a>
                            </div>
                          </div>

                        </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="tab-pane fade" id="upcomingTab" role="tabpanel" aria-labelledby="upcomingTab-tab">
                <div class="table-responsive">
                  <table id="tblUpcomingTaskDatatable" name="tblUpcomingTaskDatatable" style="width:100%"
                    class="dataTable table table-hover table-striped table-bordered tblUpcomingTaskDatatable">
                    <thead>
                      <tr class="dnd-moved">
                        <th class="th colCompleteTask" style="width: 2%;">
                        </th>
                        <th class="th colDate">Date</th>
                        <th class="th colTaskName">Task</th>
                        <th class="th colTaskDesc">Description</th>
                        <th class="th colTaskLabels">Labels</th>
                        <th class="th colTaskActions">Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{#each item in upcomingRecords}}
                      <tr class="dnd-moved" style="cursor: pointer;">
                        <td contenteditable="false" class="colCompleteTask task_priority_{{item.fields.priority}}"
                          style="width: 2%;">
                          <div
                            class="custom-control custom-checkbox chkBox pointer no-modal task_priority_{{item.fields.priority}}"
                            style="width:15px;margin-right: -6px;">
                            <input class="custom-control-input chkBox chkComplete pointer" type="checkbox"
                              id="formCheck-{{item.fields.ID}}">
                            <label class="custom-control-label chkBox pointer chk_complete" data-id="{{item.fields.ID}}"
                              for="formCheck-{{item.fields.ID}}"></label>
                          </div>
                        </td>
                        <td contenteditable="false" class="openEditTaskModal colDate" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{getTodoDate item.fields.due_date
                          'DD/MM/YYYY'}}</td>
                        <td contenteditable="false" class="openEditTaskModal colTaskName" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{item.fields.TaskName}}</td>
                        <td contenteditable="false" class="openEditTaskModal colTaskDesc" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{getDescription
                          item.fields.TaskDescription}}
                        </td>
                        <td contenteditable="false" class="openEditTaskModal colTaskLabels" data-id="{{item.fields.ID}}"
                          data-catg="{{getProjectName item.fields.ProjectName}}">
                          {{#if item.fields.TaskLabel}}
                          {{#if item.fields.TaskLabel.fields}}
                          <span class="taskTag"><a class="taganchor" href=""><i class="fas fa-tag"
                                style="margin-right: 5px;"></i>{{item.fields.TaskLabel.fields.TaskLabelName}}</a></span>
                          {{else}}
                          {{#each lbl in item.fields.TaskLabel}}
                          <span class="taskTag"><a class="taganchor" href=""><i class="fas fa-tag"
                                style="margin-right: 5px;"></i>{{lbl.fields.TaskLabelName}}</a></span>
                          {{/each}}
                          {{/if}}


                          {{/if}}
                        </td>
                        <td contenteditable="false" class="colTaskActions">
                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-primary openEditTaskModal" data-id="{{item.fields.ID}}"
                              data-catg="{{getProjectName item.fields.ProjectName}}" title="Edit Task"><i
                                class="far fa-edit" style="width: 16px;" data-id="{{item.fields.ID}}"
                                data-catg="{{getProjectName item.fields.ProjectName}}"></i></button>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-success" data-toggle="dropdown"
                              title="Reschedule Task"><i class="far fa-calendar"></i></button>
                            <div class="dropdown-menu dropdown-menu-right reschedule-dropdown-menu  no-modal"
                              aria-labelledby="dropdownMenuButton" style="width: 275px;">
                              <a class="dropdown-item no-modal setScheduleToday" href="#" data-id="{{item.fields.ID}}">
                                <i class="fas fa-calendar-day text-success no-modal"
                                  style="margin-right: 8px;"></i>Today
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getTodayDate 'ddd'}}</div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleTomorrow" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-sun text-warning no-modal" style="margin-right: 8px;"></i>Tomorrow
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getTomorrowDay}}</div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleWeekend" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-couch text-primary no-modal" style="margin-right: 8px;"></i>This
                                Weekend
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  Sat</div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleNexweek" href="#"
                                data-id="{{item.fields.ID}}">
                                <i class="fas fa-calendar-alt text-danger no-modal" style="margin-right: 8px;"></i>Next
                                Week
                                <div class="float-right no-modal" style="width: 40%; text-align: end; color: #858796;">
                                  {{getNextMonday}}
                                </div>
                              </a>
                              <a class="dropdown-item no-modal setScheduleNodate" href="#" data-id="{{item.fields.ID}}">
                                <i class="fas fa-ban text-secondary no-modal" style="margin-right: 8px;"></i>
                                No Date</a>
                              <div class="dropdown-divider no-modal"></div>
                              <div class="form-group no-modal" data-toggle="tooltip" data-placement="bottom"
                                title="Date format: DD/MM/YYYY" style="margin: 6px 20px; margin-top: 14px;">
                                <div class="input-group date no-modal" style="cursor: pointer;">
                                  <input type="text" id="{{item.fields.ID}}" class="form-control crmDatepicker no-modal"
                                    autocomplete="off">
                                  <div class="input-group-addon no-modal">
                                    <span class="glyphicon glyphicon-th no-modal" style="cursor: pointer;"></span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-warning openEditTaskModal" data-id="{{item.fields.ID}}"
                              data-ttype="comment" data-catg="{{getProjectName item.fields.ProjectName}}"
                              title="Add a Comment"><i class="far fa-comment-alt" data-id="{{item.fields.ID}}"
                                data-ttype="comment"
                                data-catg="{{getProjectName item.fields.ProjectName}}"></i></button>
                          </div>

                          <div class="dropdown btnTaskTableAction">
                            <button type="button" class="btn btn-secondary" data-toggle="dropdown"
                              data-placement="bottom" title="More Options"><i class="fas fa-ellipsis-h"></i></button>
                            <div class="dropdown-menu dropdown-menu-right crmtaskdrop" id="">
                              <a class="dropdown-item openEditTaskModal" data-id="{{item.fields.ID}}"
                                data-catg="{{getProjectName item.fields.ProjectName}}">
                                <i class="far fa-edit" style="margin-right: 8px;" data-id="{{item.fields.ID}}"
                                  data-catg="{{getProjectName item.fields.ProjectName}}"></i>Edit
                                Task</a>

                              <div class="dropdown-divider"></div>

                              <div class="dropdown-item-wrap no-modal">
                                <div class="no-modal">
                                  <div class="no-modal">
                                    <span class="no-modal">Due Date</span>
                                  </div>
                                  <div class="no-modal" style="display: inline-flex;">
                                    <i class="fa fa-calendar-check-o no-modal taskDropSecondMenu taskDropMenuToday setScheduleToday"
                                      data-toggle="tooltip" data-placement="bottom" title="Today"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-sun-o no-modal taskDropSecondMenu taskDropMenuTomorrow setScheduleTomorrow"
                                      data-toggle="tooltip" data-placement="bottom" title="Tomorrow"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-print no-modal taskDropSecondMenu taskDropMenuWeekend setScheduleWeekend"
                                      data-toggle="tooltip" data-placement="bottom" title="This weekend"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fa fa-calendar-minus-o no-modal taskDropSecondMenu taskDropMenuNextweek setScheduleNexweek"
                                      data-toggle="tooltip" data-placement="bottom" title="Next week"
                                      data-id="{{item.fields.ID}}"></i>
                                  </div>
                                </div>

                                <div class="no-modal">
                                  <div class="no-modal">
                                    <span class="no-modal">Priority</span>
                                  </div>
                                  <div class="no-modal" style="display: inline-flex;">
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskOverdue" data-toggle="tooltip"
                                      data-placement="bottom" title="Priority 1" data-priority="3"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskDropMenuTomorrow"
                                      data-toggle="tooltip" data-placement="bottom" title="Priority 2" data-priority="2"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="fas fa-flag no-modal taskDropSecondFlag taskDropMenuWeekend"
                                      data-toggle="tooltip" data-placement="bottom" title="Priority 3" data-priority="1"
                                      data-id="{{item.fields.ID}}"></i>
                                    <i class="far fa-flag no-modal taskDropSecondFlag" data-toggle="tooltip"
                                      data-placement="bottom" title="Priority 4" data-priority="0"
                                      data-id="{{item.fields.ID}}"></i>
                                  </div>
                                </div>
                              </div>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item no-modal" data-id="{{item.fields.ID}}">
                                <i class="fa fa-clock-o" style="margin-right: 8px;"></i>Reminders</a>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item no-modal movetoproject" data-id="{{item.fields.ID}}"
                                data-projectid="{{item.fields.ProjectID}}">
                                <i class="fa fa-arrow-circle-right" style="margin-right: 8px;"
                                  data-id="{{item.fields.ID}}" data-projectid="{{item.fields.ProjectID}}"></i>Move to
                                Project</a>
                              <a class="dropdown-item duplicate-task no-modal" data-id="{{item.fields.ID}}">
                                <i class="fa fa-plus-square-o" style="margin-right: 8px;"
                                  data-id="{{item.fields.ID}}"></i>Duplicate</a>

                              <div class="dropdown-divider"></div>

                              <a class="dropdown-item delete-task no-modal" data-id="{{item.fields.ID}}">
                                <i class="fas fa-trash-alt" style="margin-right: 8px;"
                                  data-id="{{item.fields.ID}}"></i>Delete
                                Task</a>
                            </div>
                          </div>

                        </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="tab-pane fade" id="projectsTab" role="tabpanel" aria-labelledby="projectsTab-tab">
                <div class="table-responsive">
                  <table id="tblNewProjectsDatatable" name="tblNewProjectsDatatable" style="width:100%"
                    class="dataTable table table-hover table-striped table-bordered tblNewProjectsDatatable">
                    <thead>
                      <tr class="dnd-moved">
                        <th class="th colPrjectDate">Date</th>
                        <th class="th colProjectName">Project</th>
                        <th class="th colProjectDesc">Description</th>
                        <th class="th colProjectName">Status</th>
                        <th class="th">Tasks</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{#each item in active_projects}}
                      <tr class="dnd-moved projectRow{{item.fields.ID}}" data-id="{{item.fields.ID}}"
                        style="cursor: pointer;">
                        <td contenteditable="false" class=" colPrjectDate" data-id="{{item.fields.ID}}">
                          <span style="display: none;">{{item.fields.ProjectStatedon}}</span>{{getTodoDate
                          item.fields.ProjectStatedon 'DD/MM/YYYY'}}
                        </td>
                        <td contenteditable="false" class="colProjectName" data-id="{{item.fields.ID}}">
                          {{#if item.fields.Active}}
                          {{item.fields.ProjectName}}
                          {{else}}
                          <span class="text-danger ">{{item.fields.ProjectName}}</span>
                          {{/if}}
                        </td>
                        <td contenteditable="false" class=" colProjectDesc" data-id="{{item.fields.ID}}">
                          {{getDescription
                          item.fields.Description}}
                        </td>
                        <td contenteditable="false" class="colProjectStatus{{getProjectStatus
                          item.fields.Active}} colProjectDesc" data-id="{{item.fields.ID}}">{{getProjectStatus
                          item.fields.Active}}
                        </td>
                        <td contenteditable="false" class=" colProjectDesc" data-id="{{item.fields.ID}}">
                          {{getProjectCount
                          item.fields.projecttasks}}
                        </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="tab-pane fade" id="filterLabelsTab" role="tabpanel" aria-labelledby="filterLabelsTab-tab">
                <div class="row">
                  <div class="col-12">
                    <h5>Labels</h5>
                  </div>
                  <div class="col-12 pb-4">
                    <div class="table-responsive">
                      <table id="tblLabels" name="tblLabels" style="width:100%"
                        class="dataTable table table-hover table-striped table-bordered tblLabels">
                        <thead>
                          <tr class="dnd-moved">
                            <th class="th colLabelCreatedDate">Created</th>
                            <th class="th colLabel">Labels</th>
                            <th class="th colLabelActions">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          {{#each label in alllabels}}
                          <tr class="dnd-moved" id="" style="cursor: pointer;">
                            <td contenteditable="false" class=" colFilterCreatedDate">{{getTodoDate
                              label.fields.MsTimeStamp
                              'MM/DD/YYYY'}}</td>
                            <td contenteditable="false" class="btnEditLabel colFilterName"
                              data-id="{{label.fields.ID}}">
                              {{label.fields.TaskLabelName}}</td>
                            <td contenteditable="false" class=" colLabelActions">
                              <div class="dropdown btnLabelActions" title="Edit Label">
                                <button type="button" class="btn btn-primary btnEditLabel"
                                  data-id="{{label.fields.ID}}"><i class="far fa-edit" style="width: 16px;"
                                    data-id="{{label.fields.ID}}"></i></button>
                              </div>

                              <div class="dropdown btnLabelActions" title="Delete Label">
                                <button type="button" class="btn btn-danger btnDeleteLabel"
                                  data-id="{{label.fields.ID}}"><i class="far fa-trash-alt" style="width: 16px;"
                                    data-id="{{label.fields.ID}}"></i></button>
                              </div>
                            </td>
                          </tr>
                          {{/each}}
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>



  {{> projectTasksModal}}
  {{> editProjectModal}}
  {{> newProjectModal}}

  {{> moveToProjectModal}}

  {{> taskDetailModal}}
  {{> newTaskModal}}

  {{> newLabelModal}}
  {{> editLabelModal}}

</template>