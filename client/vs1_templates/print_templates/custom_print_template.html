<template name="custom_print_template">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header align-items-center">
                <h5 class="modal-title" id="templatePreviewLabel"></h5>
                <input type="text" id="templatePreviewInput" value="" style="font-size: 20px; color: #858796; border-color: #fff0; width: 300px;">
                <div class="d-flex align-items-center">
                    <button class="btn btn-primary btnCopyReport" type="button" onclick="append()" style="margin-right: 8px;">
                        <i class="fa fa-copy" style="margin-right: 5px;"></i>
                        Copy File
                    </button>
                    <button class="btn btn-primary btnImportReport" onclick="importData()" type="button" style="margin-right: 8px;">
                        <i class="fas fa-file-import" style="margin-right: 5px;"></i>
                        Load Copy
                    </button>
                    <a id="editPrintMore" class="btn btnOpenSettings float-right" role="button" data-toggle="modal" href="#prtTemDisModal"><i class="icon ion-android-more-horizontal"></i></a>
                    <button type="button" class="close" onclick="$('#{{modalId}}').modal('hide');" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
            <div class="modal-body" style="background-color: #f8f9fc; max-height: calc(100vh - 200px); overflow-y: auto;">
                <div style="width: 90%;position: relative; background-color: #ffffff; padding: 8px; height: 297mm; font-size: 13.33px; color: #000000; overflow-x: visible; margin: 0 auto; -webkit-font-smoothing: subpixel-antialiased;"
                    id="{{idPrefix}}" name="{{namePrefix}}">
                    {{> preview_header1 }}
                    <!-- <hr style="width: 90%; margin: 0px auto;"> -->
                    {{> preview_body1 }}
                    {{> preview_footer1 }}
                </div>
                <div style="display: none; width: 90%;position: relative; background-color: #ffffff; padding: 8px; height: 297mm; font-size: 13.33px; color: #000000; overflow-x: visible; margin: 0 auto; -webkit-font-smoothing: subpixel-antialiased;"
                    id="{{idPrefix}}2" name="{{namePrefix}}2">
                    {{> preview_header2 }}
                    {{> preview_body2 }}
                    {{> preview_footer2 }}
                </div>
                <div style="display: none; width: 90%;position: relative; background-color: #ffffff; padding: 8px; height: 297mm; font-size: 13.33px; color: #000000; overflow-x: visible; margin: 0 auto; -webkit-font-smoothing: subpixel-antialiased;"
                    id="{{idPrefix}}3" name="{{namePrefix}}3">
                    {{> preview_header3 }}
                    {{> preview_body3 }}
                    {{> preview_footer3 }}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-times" style="margin-right: 5px;"></i>Close</button>
            </div>
        </div>
    </div>
    <div class="modal fade" role="dialog" tabindex="-1" id="prtTemDisModal">
        <div class="modal-dialog modal-dialog-centered" role="document" style="float: right;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4>Display Settings</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary saveTable" type="button"><i class="fa fa-save" style="margin-right: 5px;"></i>Save</button>
                    <button class="btn btn-warning resetTable" data-dismiss="modal" type="reset"><i class="fa fa-repeat" style="margin-right: 5px;"></i>Reset</button>
                    <button class="btn btn-secondary" data-dismiss="modal" type="button"><i class="fa fa-remove" style="margin-right: 5px;"></i>Close</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        function append(){
            var $html = $('#templatePreviewModal .modal-body');
            var str = $html.prop('innerHTML');
            const result = encodeURI(str);
            saveFile(result);
        }
        function saveFile(textToWrite)
        {  
            // get the textbox data...
            var textFileAsBlob = new Blob([textToWrite], {type:'text/plain'});
            var downloadLink = document.createElement("a");
            downloadLink.download = localStorage.getItem("print_template_detail")+".xml";
            downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
            downloadLink.click();
        }
        function importData() {
            let input = document.createElement('input');
            input.type = 'file';
            input.onchange = _ => {
                let files = input.files[0];
			    let reader = new FileReader();
                reader.readAsText(files);
                reader.onload = function() {
                const div = $('#templatePreviewModal .modal-body');
                div.innerHTML = decodeURI(reader.result);
                };
            };
            input.click();
        }
    </script>
</template>